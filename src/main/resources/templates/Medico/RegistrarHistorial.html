<div th:fragment="registrarHistorialFragment" th:object="${historial}" class="card shadow-sm p-4">
  <h4 class="mb-4 text-primary">ğŸ“ Registrar Historial MÃ©dico</h4>

  <form id="form-historial"
        th:action="@{/Medico/RegistrarHistorial}"
        method="post"
        onsubmit="enviarFormularioParcial(event, 'form-historial')">

    <!-- Paciente -->
    <div class="mb-3">
      <label for="pacienteId" class="form-label fw-semibold">ğŸ‘¤ Paciente</label>
      <select id="pacienteId" th:field="*{paciente.id}" class="form-select" required>
        <option value="">Seleccione un paciente...</option>
        <option th:each="paciente : ${pacientes}"
                th:value="${paciente.id}"
                th:text="${paciente.nombre + ' ' + paciente.apellidos}"></option>
      </select>
    </div>

    <!-- DiagnÃ³stico -->
    <div class="mb-3">
      <label for="diagnostico" class="form-label fw-semibold">ğŸ’¬ DiagnÃ³stico</label>
      <textarea id="diagnostico"
                name="diagnostico"
                class="form-control"
                rows="3"
                placeholder="Describa el diagnÃ³stico..."
                th:field="*{diagnostico}"
                required></textarea>
    </div>

    <!-- Tratamiento -->
    <div class="mb-3">
      <label for="tratamiento" class="form-label fw-semibold">ğŸ’Š Tratamiento</label>
      <textarea id="tratamiento"
                name="tratamiento"
                class="form-control"
                rows="3"
                placeholder="Indique el tratamiento..."
                th:field="*{tratamiento}"
                required></textarea>
    </div>

    <!-- Botones -->
    <div class="d-flex justify-content-end gap-2">
      <button type="submit" class="btn btn-success">ğŸ’¾ Guardar</button>
      <button type="button" class="btn btn-outline-secondary"
              onclick="cargarVista('Medico', 'HistorialMedico')">Cancelar</button>
    </div>
  </form>
</div>
